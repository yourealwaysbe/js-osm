<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" type="text/css" href="style.css" />
</head>
<body>
    
    <div id="load-box">
        <input type="file" id="file-input"/>
        <button id="load-button">Load File</button>
        <button id="clear-db-button">Clear Database</button>
    </div>
    
    <canvas width=800 height=500 id="map-canvas"></canvas>

    <div id="map-controls">
        <button id="zoom-in">Zoom In</button>
        <button id="zoom-out">Zoom Out</button>
        <button id="move-north">N</button>
        <button id="move-south">S</button>
        <button id="move-west">W</button>
        <button id="move-east">E</button>
    </div>
<!--
    <iframe id="debuggerId" class="debuggerContainer"
            src="IDBExplorer/IDBExplorer.html?name=maps" 
            height=800 width=800>
    </iframe>
-->
    <script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="osm-read-pbf.js"> </script>
    <script type="text/javascript" src="map.js"> </script>
    <script type="text/javascript" src="mapdb.js"> </script>
    <script type="text/javascript" src="maprender.js"> </script>
    <script>
        $(document).ready(function () {
            var loadButton = $("#load-button");

            mapdb.open(function () {
                var canvas = $("#map-canvas").get(0);

                var render = new MapRender(canvas, mapdb);

                loadButton.click(function (e) {
                    loadButton.html("Loading...");
                    var fileName = $("#file-input").val();
                    if (fileName.endsWith(".pbf")) {
                        mapdb.loadPbf(fileName, function () {
                            loadButton.html("Load File");
                            render.render();
                        });
                    } else {
                        alert("Require PBF");
                    }
                });

                $("#clear-db-button").click(function (e) {
                    mapdb.clear();
                });

                $("#zoom-in").click(function (e) {
                    render.zoom(0.5);
                });

                $("#zoom-out").click(function (e) {
                    render.zoom(2);
                });

                $("#move-north").click(function (e) {
                    render.move(0, 100);
                });

                $("#move-south").click(function (e) {
                    render.move(0, -100);
                });

                $("#move-west").click(function (e) {
                    render.move(-100, 0);
                });

                $("#move-east").click(function (e) {
                    render.move(100, 0);
                });

                render.render();
            });
        });
    </script>


</body>
</html>
